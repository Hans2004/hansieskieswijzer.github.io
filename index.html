<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Politieke Keuzewijzer Quiz (40 Vragen)</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #007bff;
            --light-gray: #f4f6f8;
            --dark-gray: #555;
            --text-color: #333;
            --border-color: #ddd;
            --white: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--light-gray);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: var(--white);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
        }

        h1, h2 {
            text-align: center;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        h2 {
            font-size: 1.4em;
            margin-bottom: 25px;
            line-height: 1.4;
            color: var(--text-color);
        }
        
        #question-counter {
            text-align: center;
            font-weight: bold;
            color: var(--dark-gray);
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        #options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .option:hover {
            background-color: #eef5ff;
        }
        
        .option.selected {
             background-color: #eef5ff;
             border-color: var(--secondary-color);
        }

        .option input[type="radio"] {
            margin-right: 12px;
            vertical-align: middle;
        }

        .option label {
            cursor: pointer;
            line-height: 1.5;
            vertical-align: middle;
            width: calc(100% - 30px);
            display: inline-block;
        }

        .navigation-controls, .action-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 10px;
        }
        
        .action-controls {
            margin-top: 15px;
        }

        .btn {
            padding: 12px 20px;
            font-size: 1em;
            font-weight: bold;
            color: var(--white);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, opacity 0.2s;
            flex-grow: 1;
        }
        
        #back-btn, #next-btn {
            background-color: var(--dark-gray);
        }

        #reset-btn {
            background-color: #dc3545;
        }

        #submit-btn {
            background-color: #28a745;
        }
        
        #restart-btn-results {
            display: block;
            width: 50%;
            margin: 30px auto 0;
            padding: 15px;
            font-size: 1.1em;
            font-weight: bold;
            color: var(--white);
            background-color: var(--secondary-color);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .btn:not(:disabled):hover {
            opacity: 0.85;
        }
        
        #restart-btn-results:hover {
            background-color: var(--primary-color);
        }

        .btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        #results-container h2 {
            font-size: 1.8em;
        }
        
        #score-list {
            margin: 20px 0;
            padding: 0;
            list-style-type: none;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }
        
        #score-list li {
            background-color: var(--light-gray);
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
        }

        #best-match {
            margin-top: 30px;
            padding: 20px;
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
            border-radius: 8px;
        }
        
        #best-match h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 20px;
            }
            h2 {
                font-size: 1.2em;
            }
            .navigation-controls, .action-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="quiz-container">
            <h1>Politieke Keuzewijzer</h1>
            <p id="question-counter"></p>
            <h2 id="question-text"></h2>
            <div id="options-container"></div>
            <div class="navigation-controls">
                <button id="back-btn" class="btn">Terug</button>
                <button id="next-btn" class="btn">Volgende</button>
            </div>
            <div class="action-controls">
                <button id="reset-btn" class="btn">Reset</button>
                <button id="submit-btn" class="btn" disabled>Versturen</button>
            </div>
        </div>

        <div id="results-container" style="display:none;">
            <h2>Uw Resultaten</h2>
            <h3>Scores per partij (maximaal 40 punten):</h3>
            <ul id="score-list"></ul>
            <div id="best-match">
                <h3 id="best-match-party"></h3>
                <p id="best-match-description"></p>
            </div>
            <p style="text-align: center; font-size: 0.9em; color: #666; margin-top: 20px;">
                <em>Disclaimer: Deze quiz is een hulpmiddel en gebaseerd op de verstrekte bronnen. Het is geen vervanging voor het zelf lezen van de volledige verkiezingsprogramma's.</em>
            </p>
            <button id="restart-btn-results">Opnieuw Beginnen</button>
        </div>
    </div>

    <script>
        const parties = [ "PvdD", "BBB", "CDA", "CU", "D66", "DENK", "FvD", "GroenLinks-PvdA", "JA21", "PVV", "SP", "NSC", "VVD", "Volt" ];

        const quizData = [
            {
                "question": "1. Wat is het belangrijkste uitgangspunt voor het klimaatbeleid?",
                "options": {
                    "A": "De vervuiler betaalt. Nederland moet zo snel mogelijk klimaatneutraal zijn, met 2030 als uitgangspunt. Fossiele subsidies worden per direct beëindigd [1-3].",
                    "B": "Het beleid moet vooral haalbaar, uitvoerbaar en betaalbaar zijn. We herzien afspraken als ze leiden tot onrealistische ambities of onbetaalbare oplossingen. Wie rood staat, kan niet groen doen [4-6].",
                    "C": "Het huidige klimaatbeleid is onbetaalbare gekte. We trekken de Klimaatwet in, stappen uit het Klimaatakkoord van Parijs en stoppen met de energietransitie [7, 8]."
                },
                "scores": {
                    "A": ["PvdD", "GroenLinks-PvdA", "SP", "Volt", "D66"],
                    "B": ["BBB", "CDA", "VVD", "NSC", "JA21", "CU"],
                    "C": ["FvD", "PVV"]
                }
            },
            {
                "question": "2. Welke rol speelt kernenergie in de toekomstige energiemix?",
                "options": {
                    "A": "Kernenergie is een schijnoplossing vanwege het afvalprobleem en de hoge kosten. We bouwen bestaande centrales zo snel mogelijk af en zetten vol in op zon en wind [9-11].",
                    "B": "Kernenergie is onmisbaar voor een betrouwbare en betaalbare energievoorziening. We versnellen de bouw van nieuwe kerncentrales, inclusief kleine modulaire reactoren (SMR's) [12-20].",
                    "C": "We moeten ons vooral richten op onze eigen fossiele brandstoffen. We hervatten gasboringen in Groningen en houden onze kolen- en gascentrales open [21, 22]."
                },
                "scores": {
                    "A": ["PvdD", "GroenLinks-PvdA", "SP"],
                    "B": ["BBB", "CDA", "VVD", "NSC", "JA21", "PVV", "D66", "Volt", "CU"],
                    "C": ["FvD"]
                }
            },
            {
                "question": "3. Hoe moet worden omgegaan met windturbines op land?",
                "options": {
                    "A": "Er komt een pauzeknop voor windenergie op land en op zee. Er komen strenge landelijke afstandsnormen en een gezondheidstoets. Omwonenden moeten inspraak hebben [6, 23, 24].",
                    "B": "Wind op land is een belangrijke energiebron. Omwonenden moeten tijdig betrokken worden en kunnen (mede-)eigenaar worden, maar de energietransitie moet doorgaan [25, 26].",
                    "C": "Geen enkele windturbine meer erbij. Windturbines waar omwonenden last van hebben, worden afgebroken. Ze maken mensen ziek en vervuilen het landschap [8, 27]."
                },
                "scores": {
                    "A": ["BBB", "JA21", "CDA"],
                    "B": ["PvdD", "GroenLinks-PvdA", "SP", "D66", "NSC", "Volt", "CU"],
                    "C": ["PVV", "FvD"]
                }
            },
            {
                "question": "4. Wat moet er gebeuren met de omvang van de veestapel?",
                "options": {
                    "A": "De veestapel moet met minstens 75% krimpen. We moeten een einde maken aan de bio-industrie vanwege dierenleed, stikstof en klimaatimpact [28-31].",
                    "B": "De sector verdient waardering en moet kunnen doen waar ze goed in is. Gedwongen uitkoop is onbespreekbaar. We kiezen voor innovatie en vakmanschap, niet voor krimp [32-35].",
                    "C": "Een transitie is nodig, maar in samenwerking met boeren. We bieden hen perspectief en een goed verdienmodel om doelen voor natuur en waterkwaliteit te halen [13, 36, 37]."
                },
                "scores": {
                    "A": ["PvdD", "GroenLinks-PvdA"],
                    "B": ["BBB", "PVV", "FvD", "JA21"],
                    "C": ["NSC", "CDA", "VVD", "D66", "CU", "Volt", "SP"]
                }
            },
            {
                "question": "5. Hoe moet de stikstofcrisis worden opgelost?",
                "options": {
                    "A": "Alle sectoren moeten hun uitstoot verplicht verminderen. Een forse krimp van de veehouderij is onvermijdelijk, maar ook de luchtvaart en industrie moeten krimpen [38-42].",
                    "B": "We moeten de modellenwerkelijkheid (KDW) loslaten en sturen op de daadwerkelijke staat van de natuur. PAS-melders moeten met voorrang gelegaliseerd worden en we kiezen voor technische innovatie [13, 43-47].",
                    "C": "Het stikstofbeleid moet volledig van tafel. De regels zijn gebaseerd op foute modellen en schaden de boeren en de economie onnodig [48, 49]."
                },
                "scores": {
                    "A": ["PvdD", "GroenLinks-PvdA", "SP", "D66", "Volt", "CU"],
                    "B": ["BBB", "NSC", "VVD", "CDA", "JA21"],
                    "C": ["FvD", "PVV"]
                }
            },
            {
                "question": "6. Dierenwelzijn in de veehouderij: wat is de juiste benadering?",
                "options": {
                    "A": "De behoeften van dieren staan voorop. Rechten voor dieren moeten in de Grondwet. Pijnlijke ingrepen en krappe kooien worden verboden en alle dieren krijgen vrije uitloop [50-53].",
                    "B": "Dieren in de Nederlandse veehouderij hebben het al goed en er zijn geen aanvullende regels nodig. We staan voor het behoud van de sector zoals die is [33, 54].",
                    "C": "Dierenwelzijn is belangrijk, maar moet in balans zijn met de belangen van boeren en de economie. We steunen het Convenant Dierwaardige Veehouderij [34, 55, 56]."
                },
                "scores": {
                    "A": ["PvdD", "GroenLinks-PvdA", "SP", "Volt"],
                    "B": ["BBB", "JA21"],
                    "C": ["CDA", "VVD", "NSC", "CU", "D66"]
                }
            },
            {
                "question": "7. Wat is uw standpunt over de jacht?",
                "options": {
                    "A": "De jacht voor plezier moet verboden worden. Dieren moeten zo veel mogelijk met rust worden gelaten. In vrijheid levende dieren worden niet gedood, tenzij er sprake is van uitzichtloos lijden [52, 53, 57, 58].",
                    "B": "Jacht en faunabeheer zijn een belangrijk en noodzakelijk onderdeel van goed natuuronderhoud, schadepreventie en verkeersveiligheid. Jagers moeten actief betrokken worden bij beleid [33, 34, 56, 59].",
                    "C": "Er moet een einde komen aan de hobbyjacht. Jagersclubs (Faunabeheereenheden) worden afgeschaft [60, 61]."
                },
                "scores": {
                    "A": ["PvdD", "SP"],
                    "B": ["BBB", "JA21", "CDA", "VVD", "NSC"],
                    "C": ["PvdD", "GroenLinks-PvdA"]
                }
            },
            {
                "question": "8. Het minimumloon moet...",
                "options": {
                    "A": "omhoog naar € 18 per uur. De daaraan gekoppelde uitkeringen zoals de AOW stijgen mee [62-64].",
                    "B": "stapsgewijs omhoog naar € 18 per uur, maar dit moet gekoppeld zijn aan een stelselvernieuwing om de loonkosten voor werkgevers te compenseren [65].",
                    "C": "omhoog naar € 16 per uur, en de uitkeringen stijgen mee [66]."
                },
                "scores": {
                    "A": ["SP", "GroenLinks-PvdA", "PvdD"],
                    "B": ["NSC", "CU"],
                    "C": ["DENK"]
                }
            },
            {
                "question": "9. Hoe moet de belasting op grote vermogens eruitzien?",
                "options": {
                    "A": "Er moet een miljonairsbelasting of klimaatbelasting komen voor de grootste vermogens. De erfbelasting voor grote erfenissen moet omhoog [1, 67-69].",
                    "B": "De belastingen op sparen (box 3) en erven moeten zeker niet omhoog en het liefst worden afgeschaft. We stimuleren vermogensopbouw [70-73].",
                    "C": "We moeten belasting heffen op daadwerkelijk genoten inkomsten uit vermogen, niet op fictief rendement. De eigen woning blijft onbelast [33, 34, 56, 74, 75]."
                },
                "scores": {
                    "A": ["PvdD", "GroenLinks-PvdA", "SP", "CU", "Volt"],
                    "B": ["VVD", "FvD", "JA21", "PVV"],
                    "C": ["NSC", "CDA", "BBB", "D66", "DENK"]
                }
            },
            {
                "question": "10. Wat is de beste aanpak voor het toeslagenstelsel?",
                "options": {
                    "A": "Het stelsel moet fundamenteel eenvoudiger. We vervangen de toeslagen door een vast, begrijpelijk basisbedrag of een verzilverbare belastingkorting [76-80].",
                    "B": "We maken toeslagen overbodig door publieke voorzieningen als kinderopvang gratis te maken en het minimumloon fors te verhogen [71, 81, 82].",
                    "C": "De AOW en uitkeringen stijgen mee met de lonen. We hervormen het belastingstelsel zodat werken meer loont en mensen minder afhankelijk zijn van toeslagen [33, 83]."
                },
                "scores": {
                    "A": ["D66", "NSC", "CU", "Volt"],
                    "B": ["SP", "GroenLinks-PvdA", "PvdD"],
                    "C": ["CDA", "VVD"]
                }
            },
            {
                "question": "11. Wat moet er gebeuren met het eigen risico in de zorg?",
                "options": {
                    "A": "Het moet volledig worden afgeschaft. Zorg mag geen financiële drempel zijn [53, 84-86].",
                    "B": "Het moet niet worden afgeschaft, omdat dit de premie voor iedereen duurder maakt. Wel kunnen we de kosten voor chronisch zieken of bij specifieke behandelingen beperken [87-90].",
                    "C": "Het moet worden vervangen door een inkomensafhankelijke eigen bijdrage, zodat de sterkste schouders de zwaarste lasten dragen [33, 34, 56]."
                },
                "scores": {
                    "A": ["PvdD", "PVV", "SP", "GroenLinks-PvdA", "DENK", "CU"],
                    "B": ["VVD", "JA21", "D66", "NSC", "CDA"],
                    "C": ["NSC"]
                }
            },
            {
                "question": "12. Hoe kijkt u naar marktwerking in de zorg?",
                "options": {
                    "A": "De zorg is een basisvoorziening, geen markt. Marktwerking moet worden teruggedrongen. Private investeerders en winstuitkeringen horen niet thuis in de zorg [91-97].",
                    "B": "Solidariteit blijft de basis, maar er is ook ruimte voor marktpartijen zoals zelfstandige behandelcentra. We moeten een gelijker speelveld creëren tussen ziekenhuizen en private klinieken [61].",
                    "C": "De marktwerking is doorgeslagen. We schaffen de concurrentie tussen zorgverzekeraars af en gaan naar één basisverzekering of een Nationaal ZorgFonds [98, 99]."
                },
                "scores": {
                    "A": ["GroenLinks-PvdA", "PvdD", "SP", "CU", "Volt"],
                    "B": ["CDA", "VVD", "D66"],
                    "C": ["SP", "BBB", "DENK"]
                }
            },
            {
                "question": "13. Wat is de juiste aanpak van het asielbeleid?",
                "options": {
                    "A": "Een totale asielstop en het opzeggen van internationale verdragen. Nederland is vol. Wie zich misdraagt, wordt direct uitgezet [100-103].",
                    "B": "Een humaan en solidair beleid. We moeten zorgen voor veilige vluchtroutes, menswaardige opvang en de grondoorzaken van migratie aanpakken [104-107].",
                    "C": "Een streng, realistisch en werkbaar beleid om de instroom te beperken. Asielprocedures moeten waar mogelijk buiten Europa plaatsvinden en we moeten strenger zijn op gezinshereniging [6, 108-111]."
                },
                "scores": {
                    "A": ["PVV", "FvD", "JA21"],
                    "B": ["PvdD", "GroenLinks-PvdA", "DENK", "Volt", "SP", "CU"],
                    "C": ["NSC", "CDA", "BBB", "VVD", "D66"]
                }
            },
            {
                "question": "14. Wat is uw standpunt over de Spreidingswet, die gemeenten kan dwingen asielzoekers op te vangen?",
                "options": {
                    "A": "De Spreidingswet moet onmiddellijk worden ingetrokken. Gemeenten moeten zelf beslissen over opvang, zonder dwang vanuit Den Haag [112-114].",
                    "B": "De wet moet worden uitgevoerd voor een eerlijke verdeling over het land. Ook rijkere gemeenten moeten hun eerlijke aandeel leveren [115-121]."
                },
                "scores": {
                    "A": ["PVV", "JA21", "BBB", "VVD"],
                    "B": ["GroenLinks-PvdA", "PvdD", "SP", "Volt", "D66", "CU", "CDA", "NSC", "DENK"]
                }
            },
            {
                "question": "15. Wat verwacht u van nieuwkomers?",
                "options": {
                    "A": "Ze moeten zich aanpassen aan de Nederlandse cultuur en waarden. Wie hier wil wonen, hoort mee te doen, de taal te leren en onze normen te respecteren. Dit is niet onderhandelbaar [33, 34, 56, 122-125].",
                    "B": "We moeten stoppen met het label 'integratie' voor mensen die hier opgroeien. We moeten uitgaan van wederzijdse acceptatie, niet van eenzijdige aanpassing [126].",
                    "C": "Iedereen, ook nieuwkomers, moet onze vrije waarden onderschrijven. Wie onze wetten afwijst of onze verdraagzaamheid ondermijnt, heeft hier niets te zoeken [95, 96, 127]."
                },
                "scores": {
                    "A": ["BBB", "PVV", "VVD", "NSC", "CDA", "JA21", "CU", "FvD"],
                    "B": ["DENK"],
                    "C": ["D66", "GroenLinks-PvdA", "Volt"]
                }
            },
            {
                "question": "16. Hoe kijkt u naar de rol van de Europese Unie?",
                "options": {
                    "A": "We moeten naar een federaal Europa met een Europees leger en een Europese minister van Financiën. Grote problemen kunnen we alleen samen oplossen [128-130].",
                    "B": "Nederland moet uit de EU (Nexit). De EU ondermijnt onze soevereiniteit en kost ons miljarden. We moeten weer baas in eigen land worden [131, 132].",
                    "C": "De EU is nuttig voor handel en veiligheid, maar we moeten kritisch zijn op 'Brusselse bemoeizucht'. We moeten geen nationale koppen op Europees beleid zetten [6, 56, 129, 133-136]."
                },
                "scores": {
                    "A": ["Volt", "D66"],
                    "B": ["FvD", "PVV"],
                    "C": ["BBB", "CDA", "VVD", "NSC", "JA21", "SP", "CU", "GroenLinks-PvdA"]
                }
            },
            {
                "question": "17. Wat is uw standpunt over de defensie-uitgaven?",
                "options": {
                    "A": "De uitgaven moeten fors omhoog, met 3,5% van het BBP als uitgangspunt, zoals de nieuwe NAVO-norm voorschrijft. Dit is nodig om onze vrijheid en veiligheid te beschermen [137-141].",
                    "B": "Investeringen in defensie mogen niet ten koste gaan van klimaat, natuur, sociale zekerheid, zorg en onderwijs. We lopen niet blind achter de 'Trump-norm' aan, maar zetten in op vrede en diplomatie [119, 142, 143].",
                    "C": "Investeren in defensie is nodig, maar moet gekoppeld worden aan een weerbare samenleving met burgersteunpunten en goede infrastructuur, zoals de Lelylijn en Nedersaksenlijn [33, 144]."
                },
                "scores": {
                    "A": ["VVD", "BBB", "CDA", "NSC", "D66", "JA21", "CU"],
                    "B": ["PvdD", "GroenLinks-PvdA", "SP"],
                    "C": ["NSC", "BBB"]
                }
            },
            {
                "question": "18. Moet Nederland een Europees leger steunen?",
                "options": {
                    "A": "Ja, we moeten toewerken naar een Europese krijgsmacht. Alleen zo kan Europa zichzelf verdedigen en wordt het minder afhankelijk van de VS [128, 130].",
                    "B": "Nee, er komt geen Europees leger. De Tweede Kamer moet altijd zelf kunnen beslissen over de inzet van Nederlandse militairen [95, 96, 129, 141, 145]."
                },
                "scores": {
                    "A": ["Volt", "D66"],
                    "B": ["CDA", "VVD", "NSC", "BBB", "JA21", "SP", "CU", "PvdD", "GroenLinks-PvdA", "PVV", "FvD"]
                }
            },
            {
                "question": "19. Wat is de juiste houding in het conflict tussen Israël en de Palestijnen?",
                "options": {
                    "A": "Nederland moet de genocide en bezetting door Israël veroordelen, sancties instellen en de Palestijnse staat erkennen. Het internationaal recht is leidend [146-150].",
                    "B": "Israël is een democratie en heeft het recht op zelfverdediging. Nederland moet de banden met Israël versterken en de ambassade naar Jeruzalem verhuizen [151-153].",
                    "C": "We moeten streven naar een tweestatenoplossing. Het geweld van Hamas is onacceptabel, maar de illegale Israëlische nederzettingen ondermijnen de vrede [15, 154-157]."
                },
                "scores": {
                    "A": ["PvdD", "DENK", "SP", "GroenLinks-PvdA", "Volt"],
                    "B": ["PVV", "JA21", "BBB"],
                    "C": ["CDA", "VVD", "NSC", "CU", "D66"]
                }
            },
            {
                "question": "20. Wat moet de overheid doen aan de stijgende kosten van levensonderhoud?",
                "options": {
                    "A": "De btw op boodschappen moet naar 0%, net als op groente en fruit. De btw op energie moet ook omlaag [3, 158, 159].",
                    "B": "We moeten de belastingen op werk verlagen en het toeslagenstelsel vereenvoudigen, zodat mensen meer overhouden van hun loon [160-163].",
                    "C": "We moeten maximumprijzen instellen voor basisproducten zoals gezond eten, energie en internet. De overheid moet de prijzen controleren en reguleren [71, 164]."
                },
                "scores": {
                    "A": ["PVV", "GroenLinks-PvdA", "PvdD", "DENK"],
                    "B": ["VVD", "CDA", "NSC", "D66", "JA21"],
                    "C": ["SP"]
                }
            },
            {
                "question": "21. Hoe moet de woningbouw versneld worden?",
                "options": {
                    "A": "Door tien nieuwe steden te bouwen en een Rijksgrondfaciliteit op te richten. We moeten groots durven denken, zoals bij de Flevopolder [15, 165, 166].",
                    "B": "Door de stikstofcrisis op te lossen. Een krimp van de veestapel met 75% maakt landbouwgrond vrij voor natuur én woningbouw. Liever een dak boven je hoofd dan een biefstuk op je bord [167, 168].",
                    "C": "Door regels te schrappen. We schaffen de Wet betaalbare huur af, beperken bezwaarprocedures en stoppen met geneuzel over duurzaamheid. Bouwen, bouwen, bouwen [169-171]."
                },
                "scores": {
                    "A": ["D66", "CDA"],
                    "B": ["PvdD", "GroenLinks-PvdA", "SP", "Volt"],
                    "C": ["VVD", "PVV", "FvD", "JA21", "BBB"]
                }
            },
            {
                "question": "22. Hoe moet de huurmarkt gereguleerd worden?",
                "options": {
                    "A": "De huren worden voor vijf jaar bevroren, ook in de vrije sector. De winstbelasting voor woningcorporaties wordt geschrapt, zodat zij kunnen investeren [172, 173].",
                    "B": "De Wet betaalbare huur, die de huren reguleert, wordt afgeschaft. Dit jaagt verhuurders weg en vermindert het aanbod. Verhuren moet weer lonen [132, 174-176].",
                    "C": "De Wet betaalbare huur blijft bestaan om woekerhuren tegen te gaan. De huren stijgen maximaal met de inflatie. Woningcorporaties bouwen meer betaalbare middenhuur [95, 96, 177-180]."
                },
                "scores": {
                    "A": ["SP"],
                    "B": ["JA21", "VVD", "FvD", "BBB"],
                    "C": ["NSC", "CDA", "GroenLinks-PvdA", "PvdD", "D66", "Volt", "CU"]
                }
            },
            {
                "question": "23. Hoe moet het onderwijs worden verbeterd?",
                "options": {
                    "A": "Terug naar de basis: lezen, schrijven, rekenen en vaderlandse geschiedenis. Geen woke- of klimaatindoctrinatie. Orde, rust en discipline moeten de norm zijn in de klas [181-183].",
                    "B": "Investeer in leraren en gelijke kansen. Kleinere klassen, hogere salarissen en minder regels. Onderwijsachterstanden worden aangepakt met extra ondersteuning, niet met dure bijlesbureaus [184-187].",
                    "C": "Onderwijs op maat voor elk talent. Praktijkonderwijs verdient meer waardering. Leerlingen krijgen meer vrijheid en de overstap tussen niveaus (stapelen) wordt makkelijker [188-190]."
                },
                "scores": {
                    "A": ["PVV", "FvD", "BBB", "JA21"],
                    "B": ["SP", "GroenLinks-PvdA", "PvdD", "DENK", "CU"],
                    "C": ["NSC", "VVD", "D66", "Volt", "CDA"]
                }
            },
            {
                "question": "24. Wat is uw mening over de 'Week van de Lentekriebels' op basisscholen?",
                "options": {
                    "A": "Deze week moet worden afgeschaft. Het is een vorm van seksuele woke-indoctrinatie die niet thuishoort op school. Opvoeding is aan de ouders [163, 182].",
                    "B": "Het is belangrijk, maar ouders moeten kunnen bepalen welke vormen van geseksualiseerd onderwijs hun kinderen krijgen. Er is geen plek voor 'regenboogdwang' [191, 192].",
                    "C": "Seksuele voorlichting, met aandacht voor diversiteit en het aangeven van grenzen, is een essentieel onderdeel van het curriculum. Het helpt kinderen weerbaar te maken [15, 95, 96, 193-195]."
                },
                "scores": {
                    "A": ["PVV", "FvD"],
                    "B": ["DENK"],
                    "C": ["GroenLinks-PvdA", "D66", "Volt", "SP", "PvdD", "CU", "NSC", "VVD", "CDA"]
                }
            },
            {
                "question": "25. Moeten burgers meer directe invloed krijgen via referenda?",
                "options": {
                    "A": "Ja, er moet een bindend correctief referendum komen naar Zwitsers model. De bevolking moet de politiek kunnen terugfluiten als zij het niet eens is met een wet [196-198].",
                    "B": "Ja, het raadgevend referendum moet worden heringevoerd, eventueel in combinatie met burgerberaden om complexe vraagstukken goed te kunnen wegen [199-201].",
                    "C": "Nee, referenda bieden schijninvloed en vergroten de verdeeldheid. De volksvertegenwoordiging, die door ons gekozen is, moet de besluiten nemen [202, 203]."
                },
                "scores": {
                    "A": ["SP", "FvD", "PVV"],
                    "B": ["PvdD", "D66", "NSC", "DENK"],
                    "C": ["JA21", "CU", "Volt", "VVD", "CDA", "BBB"]
                }
            },
            {
                "question": "26. Wat is de toekomst van de monarchie?",
                "options": {
                    "A": "We moeten het koningschap moderniseren naar een puur ceremoniële rol. De koning moet belasting betalen, net als iedereen [204, 205].",
                    "B": "Het Koningshuis is onmiskenbaar verbonden met onze geschiedenis. De koning moet weer een rol krijgen bij de kabinetsformatie [206].",
                    "C": "Nederland moet een republiek worden. Er moet een referendum komen over de wenselijkheid van het Koninklijk Huis [71, 132, 207]."
                },
                "scores": {
                    "A": ["PvdD", "D66", "GroenLinks-PvdA", "Volt", "NSC"],
                    "B": ["BBB", "JA21", "CDA"],
                    "C": ["FvD", "SP"]
                }
            },
            {
                "question": "27. De Eerste Kamer moet wat u betreft...",
                "options": {
                    "A": "worden afgeschaft. Het is een ondemocratisch orgaan dat de wil van de direct gekozen Tweede Kamer kan blokkeren [196, 198, 208].",
                    "B": "worden hervormd. De zittingsduur wordt verlengd naar zes jaar, met verkiezingen om de drie jaar. Dit versterkt de rol als 'Kamer van bezinning' [6, 209].",
                    "C": "blijven functioneren zoals nu, als een belangrijke controle op de kwaliteit en uitvoerbaarheid van wetgeving."
                },
                "scores": {
                    "A": ["FvD", "PVV", "D66", "DENK"],
                    "B": ["CDA", "GroenLinks-PvdA", "SP"],
                    "C": ["VVD", "BBB", "NSC", "CU", "JA21", "PvdD", "Volt"]
                }
            },
            {
                "question": "28. Wat is de beste aanpak voor de georganiseerde misdaad?",
                "options": {
                    "A": "Een keiharde aanpak. We voeren minimumstraffen in, breiden de kroongetuigenregeling uit en pakken crimineel vermogen af, desnoods naar Italiaans anti-maffia model [95, 96, 132, 190, 208, 210-212].",
                    "B": "Naast een harde aanpak moeten we investeren in preventie, kansengelijkheid en wijkveiligheid. We moeten voorkomen dat jongeren in de criminaliteit belanden [15, 213-215]."
                },
                "scores": {
                    "A": ["VVD", "JA21", "PVV", "BBB", "CDA", "NSC"],
                    "B": ["D66", "GroenLinks-PvdA", "SP", "PvdD", "Volt", "CU", "DENK"]
                }
            },
            {
                "question": "29. Hoe kijkt u naar de regulering van softdrugs (cannabis)?",
                "options": {
                    "A": "We legaliseren de hele keten, van productie tot verkoop. Dit haalt de handel uit criminele handen en maakt controle op kwaliteit mogelijk [216, 217].",
                    "B": "We stoppen het wietexperiment. Coffeeshops worden gesloten. Het gedoogbeleid heeft geleid tot meer criminaliteit en overlast [116, 218].",
                    "C": "We wachten de resultaten van het wietexperiment af voordat we een definitief besluit nemen. Regulering moet samengaan met preventie en een sterke aanpak van overlast [163, 211, 219]."
                },
                "scores": {
                    "A": ["SP", "D66", "GroenLinks-PvdA", "Volt", "PvdD"],
                    "B": ["PVV", "CDA", "CU"],
                    "C": ["VVD", "NSC", "BBB", "JA21"]
                }
            },
            {
                "question": "30. Wat is uw standpunt over online privacy en de macht van techbedrijven?",
                "options": {
                    "A": "De overheid moet burgers beschermen tegen de macht van Big Tech. We moeten investeren in Europese, open-source alternatieven en privacy streng waarborgen met duidelijke regels [220-224].",
                    "B": "We moeten burgers en ondernemers vrijlaten en niet te veel regels opleggen. De focus moet liggen op innovatie en economische groei [163, 225].",
                    "C": "De overheid moet burgers beschermen met duidelijke regels, maar tegelijk de kansen van digitalisering omarmen. Er is een balans nodig tussen vrijheid en veiligheid [33, 34, 226]."
                },
                "scores": {
                    "A": ["Volt", "D66", "PvdD", "GroenLinks-PvdA", "SP", "DENK", "NSC"],
                    "B": ["FvD", "VVD", "JA21"],
                    "C": ["CDA", "BBB", "CU"]
                }
            },
            {
                "question": "31. Moet er een wettelijk recht komen om offline te zijn buiten werktijd?",
                "options": {
                    "A": "Ja, het 'recht op onbereikbaarheid' moet wettelijk worden vastgelegd om werknemers te beschermen tegen een doorgeslagen werkdruk [95, 96, 227].",
                    "B": "Nee, dit is een zaak tussen werkgever en werknemer. De overheid moet zich hier niet mee bemoeien en vertrouwen op de eigen verantwoordelijkheid van mensen."
                },
                "scores": {
                    "A": ["SP", "GroenLinks-PvdA", "PvdD", "Volt"],
                    "B": ["VVD", "BBB", "CDA", "NSC", "D66", "JA21", "CU", "PVV", "FvD", "DENK"]
                }
            },
            {
                "question": "32. Wat moet de rol van de overheid zijn in de economie?",
                "options": {
                    "A": "De overheid moet een sterke, sturende rol hebben. Publieke voorzieningen zoals zorg, wonen en energie moeten in publieke handen zijn en marktwerking moet worden teruggedrongen [91, 228-230].",
                    "B": "De overheid moet zo klein mogelijk zijn, met minder regels en lagere belastingen. Ze moet zich richten op kerntaken en de burger en ondernemer de vrijheid geven om te ondernemen [5, 163, 231, 232].",
                    "C": "De overheid moet betrouwbaar en dienstbaar zijn, met oog voor de menselijke maat en de kracht van gemeenschappen. Ze moet ondernemers ondersteunen en tegelijkertijd publieke waarden bewaken [33, 34, 233, 234]."
                },
                "scores": {
                    "A": ["SP", "GroenLinks-PvdA", "PvdD", "Volt", "DENK"],
                    "B": ["VVD", "FvD", "JA21"],
                    "C": ["NSC", "CDA", "BBB", "CU"]
                }
            },
            {
                "question": "33. Hoe kijkt u naar de rol van de vakbonden?",
                "options": {
                    "A": "Sterke, onafhankelijke vakbonden zijn essentieel voor een eerlijke arbeidsmarkt. We moeten hun positie versterken en ervoor zorgen dat zoveel mogelijk werknemers onder een cao vallen [53, 95, 96, 235].",
                    "B": "Vakbonden hebben een rol in het overlegmodel, maar de overheid moet niet blindelings hun eisen overnemen. Flexibiliteit op de arbeidsmarkt is ook belangrijk voor ondernemers."
                },
                "scores": {
                    "A": ["SP", "GroenLinks-PvdA", "PvdD", "CU"],
                    "B": ["VVD", "D66", "NSC", "CDA", "BBB", "JA21", "PVV", "FvD", "Volt", "DENK"]
                }
            },
            {
                "question": "34. Hoe moet de overheid omgaan met tradities zoals Sinterklaas?",
                "options": {
                    "A": "De overheid moet zich niet bemoeien met tradities. Sinterklaas moet gevierd worden mét Zwarte Piet. Dit is onderdeel van onze cultuur [163, 236].",
                    "B": "Sinterklaas moet een feest voor iedereen zijn. Dat betekent dat Zwarte Piet, als racistische karikatuur, overal moet worden afgeschaft [105, 106, 237-239]."
                },
                "scores": {
                    "A": ["PVV", "FvD"],
                    "B": ["GroenLinks-PvdA", "PvdD", "Volt", "D66", "DENK", "SP"]
                }
            },
            {
                "question": "35. Wat is de beste aanpak voor de problemen in de jeugdzorg?",
                "options": {
                    "A": "We moeten het systeem veranderen, niet het kind. Investeer in preventie, gezinsondersteuning en de pedagogische basis op school en in de wijk om zwaardere zorg te voorkomen [240-243].",
                    "B": "Specialistische jeugdzorg moet weer landelijk of regionaal worden georganiseerd. De decentralisatie naar gemeenten heeft geleid tot versnippering en kwaliteitsproblemen [244-246].",
                    "C": "Er moet een einde komen aan de marktwerking en winstbejag in de jeugdzorg. Publiek geld moet naar de zorg voor kinderen gaan, niet naar aandeelhouders [95, 96, 195]."
                },
                "scores": {
                    "A": ["D66", "CU", "GroenLinks-PvdA", "Volt"],
                    "B": ["CDA", "NSC", "BBB", "DENK", "PvdD"],
                    "C": ["SP", "VVD", "JA21"]
                }
            },
            {
                "question": "36. Moet euthanasie bij voltooid leven wettelijk worden geregeld?",
                "options": {
                    "A": "Ja, mensen moeten zelf kunnen beslissen over een waardig levenseinde. We steunen een wettelijke regeling voor hulp bij een voltooid leven [247, 248].",
                    "B": "Nee, de huidige euthanasiewet is voldoende. We zijn tegen een 'voltooid leven'-wet omdat dit de waarde van het leven kan uithollen en kwetsbare ouderen onder druk kan zetten [163, 249, 250]."
                },
                "scores": {
                    "A": ["D66", "Volt"],
                    "B": ["CU", "CDA", "NSC", "SP", "BBB", "JA21"]
                }
            },
            {
                "question": "37. Wat is uw visie op het gebruik van Engels in het hoger onderwijs?",
                "options": {
                    "A": "Nederlands moet de voertaal zijn. De wildgroei aan Engelstalige opleidingen trekt te veel internationale studenten aan, wat druk legt op huisvesting en de kwaliteit van onderwijs [251-255].",
                    "B": "Internationalisering is waardevol. Onderwijsinstellingen moeten zelf de ruimte hebben om te bepalen welke opleidingen Engelstalig zijn, om internationaal talent aan te trekken [256-258].",
                    "C": "Het aantal Engelstalige opleidingen moet beperkt worden, maar we moeten selectief zijn. Voor studies in tekortsectoren of met een sterk internationaal karakter blijft Engels belangrijk [15, 95, 259, 260]."
                },
                "scores": {
                    "A": ["FvD", "NSC", "BBB", "CDA", "SP", "PVV"],
                    "B": ["Volt"],
                    "C": ["D66", "VVD", "JA21", "GroenLinks-PvdA", "CU"]
                }
            },
            {
                "question": "38. Wat is de beste manier om het lerarentekort aan te pakken?",
                "options": {
                    "A": "Door de werkdruk te verlagen met kleinere klassen, hogere salarissen en minder administratieve lasten. Leraren moeten weer vertrouwen en ruimte krijgen [184-187].",
                    "B": "Door het aantrekkelijker te maken voor zij-instromers en door ervaren vakmensen uit de praktijk voor de klas te halen. Lerarenopleidingen moeten praktijkgerichter worden [181, 261, 262].",
                    "C": "Door deeltijdwerk te ontmoedigen en contractuitbreiding te stimuleren. Met een meerurenbonus en goede arbeidsvoorwaarden maken we het aantrekkelijker om meer uren te werken [188, 263]."
                },
                "scores": {
                    "A": ["SP", "GroenLinks-PvdA", "PvdD", "CU", "DENK"],
                    "B": ["NSC", "CDA", "D66", "Volt"],
                    "C": ["VVD", "BBB", "JA21"]
                }
            },
            {
                "question": "39. Hoe moet omgegaan worden met de wolf in Nederland?",
                "options": {
                    "A": "De wolf is een verrijking van de natuur en moet strikt beschermd blijven. Veehouders moeten worden geholpen met preventieve maatregelen zoals wolfwerende hekken [264, 265].",
                    "B": "Er is geen ruimte voor de wolf in ons dichtbevolkte land. Veiligheid voor mens en dier staat voorop. We moeten streven naar een nulstand buiten aangewezen leefgebieden [33, 34, 56, 266].",
                    "C": "De wolf mag blijven, maar de populatie moet actief worden beheerd. Dat betekent dat afschot van probleemwolven geen taboe mag zijn [163, 236, 267]."
                },
                "scores": {
                    "A": ["PvdD", "GroenLinks-PvdA", "Volt"],
                    "B": ["BBB", "FvD"],
                    "C": ["NSC", "CDA", "VVD", "D66", "JA21", "SP"]
                }
            },
            {
                "question": "40. Moet er een verbod komen op ongerichte reclame in de openbare ruimte?",
                "options": {
                    "A": "Ja, reclame voor consumptiegoederen en -diensten in de openbare ruimte moet stoppen. Het moedigt overconsumptie aan en is schadelijk voor het welzijn [95, 96, 268].",
                    "B": "Nee, dit is een onnodige beperking van de commerciële vrijheid. Ondernemers moeten de ruimte hebben om hun producten en diensten te promoten."
                },
                "scores": {
                    "A": ["PvdD", "GroenLinks-PvdA"],
                    "B": ["VVD", "BBB", "JA21", "PVV", "FvD", "CDA", "NSC", "CU", "D66", "Volt", "DENK", "SP"]
                }
            }
        ];

        const partyDescriptions = {
            "PvdD": "U plaatst de belangen van een leefbare Aarde, dieren en natuur radicaal voorop. Dit betekent een snelle en forse krimp van de vee-industrie, een einde aan fossiele subsidies en een verbod op kernenergie [2, 9, 29, 269]. U bent voorstander van het verankeren van dierenrechten en rechten voor de natuur in de Grondwet [270, 271]. U kiest voor een eerlijke verdeling van welvaart, met hogere belastingen op grote vermogens en vervuiling, en een humaan migratiebeleid [1, 104].",
            "BBB": "U staat pal voor de Nederlandse boeren, tuinders en vissers, die u ziet als de ruggengraat van onze voedselvoorziening en het landschap [272]. U kiest voor een nuchtere aanpak van klimaat- en stikstofproblemen ('Wie rood staat, kan niet groen doen') en verzet zich tegen gedwongen uitkoop van boeren [32, 273]. U hecht veel waarde aan de regio, 'noaberschap', Nederlandse tradities en een overheid die dichtbij de mensen staat [274, 275].",
            "CDA": "U kiest voor een fatsoenlijk land, gebouwd op vertrouwen, verantwoordelijkheid en een betrokken samenleving [276, 277]. U zoekt een balans tussen een sterke, duurzame economie en een zorgzame gemeenschap. U bent voor het halen van klimaatdoelen met een mix van duurzame energie en kernenergie [13]. U pleit voor een streng maar werkbaar migratiebeleid, een eenvoudiger belastingstelsel en het behoud van de hypotheekrenteaftrek in aangepaste vorm [87, 109].",
            "CU": "U benadert de politiek vanuit christelijk-sociale waarden, met de nadruk op gemeenschappen, het gezin en de bescherming van het (ongeboren) leven [278, 279]. U bent voor ambitieus klimaatbeleid, zorg voor de schepping en een humaan migratiebeleid, maar ook voor een streng en realistisch asielbeleid [280, 281]. Financieel wilt u gezinnen ondersteunen met een forse verhoging van de kinderbijslag en de grootste vermogens extra belasten [282, 283].",
            "D66": "U streeft naar een progressief en vrij Nederland in een sterk en verenigd Europa [127, 284]. U bent voor ambitieuze klimaatdoelen, meer investeringen in schone energie en een toekomst voor zowel boeren als natuur [165]. U hecht veel waarde aan gelijke kansen, LHBTIQA+-rechten en een sterke, weerbare democratie [285]. U wilt de woningnood doorbreken met de bouw van tien nieuwe steden [165].",
            "DENK": "De strijd tegen discriminatie en racisme is voor u een topprioriteit. U pleit voor wederzijdse acceptatie in plaats van eenzijdige aanpassing en wilt dat het woord 'integratie' wordt afgeschaft voor wie hier is opgegroeid [126, 286]. U wilt de koopkracht verbeteren door de btw op boodschappen te verlagen en het eigen risico af te schaffen [85, 158]. Internationaal komt u op voor de rechten van de Palestijnen en andere onderdrukte volken [287, 288].",
            "FvD": "U wilt Nederland weer soeverein, vrij en trots maken. Dit betekent een Nexit, het opzeggen van internationale verdragen en het stoppen met alle klimaat- en stikstofbeleid [132, 289]. U pleit voor het heropenen van het Groninger gasveld voor betaalbare energie en een radicale verlaging van de belastingen [22, 72]. U wilt meer directe democratie via bindende referenda [198].",
            "GroenLinks-PvdA": "U gelooft in solidariteit en het eerlijk delen van welvaart in een groene en duurzame toekomst. U wilt de klimaatcrisis ambitieus aanpakken, grote vervuilers laten betalen en de fossiele subsidies afschaffen [290-292]. U streeft naar een 'Nieuwe Verzorgingsstaat' met hogere lonen, betaalbare woningen en een sterke publieke sector [293, 294]. U staat voor een humaan migratiebeleid en een sterke, sociale Europese Unie [295].",
            "JA21": "U kiest voor een conservatief-liberale koers met een focus op veiligheid, welvaart en grenzen [296]. U wilt migratie sterk beperken, met als doel een asielstop, en internationale verdragen herzien [297]. U bent voor een kleinere overheid, lagere belastingen en een harde aanpak van criminaliteit [298]. Het beschermen van de eigen woning tegen extra belastingen is voor u belangrijk [70].",
            "PVV": "U wilt de Nederlander weer op 1 zetten. Een totale asielstop en het sluiten van de grenzen is uw topprioriteit, desnoods door verdragen op te zeggen [299, 300]. U wilt de Klimaatwet intrekken, de btw op energie en boodschappen verlagen en het eigen risico afschaffen [7, 159, 301]. U wilt de Nederlandse cultuur en tradities, inclusief Zwarte Piet, beschermen en de invloed van de islam terugdringen [236, 302].",
            "SP": "U streeft naar een 'super sociaal' Nederland, waarin de belangen van de werkende klasse voorop staan. U wilt een einde aan marktwerking in de publieke sector: het eigen risico moet af en wonen moet een recht zijn, geen winstmodel [303, 304]. U pleit voor een forse verhoging van het minimumloon naar €18, gratis openbaar vervoer en een sociale klimaatrevolutie [196, 252].",
            "NSC": "U wilt de basis op orde brengen met een betrouwbare overheid en bestaanszekerheid [305]. U kiest voor een streng en realistisch migratiebeleid op alle vlakken (arbeid, studie, asiel) en een oplossing voor de stikstofcrisis die boeren perspectief biedt, zonder gedwongen uitkoop [136, 306]. Een eenvoudiger en eerlijker belasting- en toeslagenstelsel en het oplossen van de wooncrisis zijn voor u cruciale punten [307].",
            "VVD": "U staat voor een land met vrijheid, veiligheid en welvaart [308]. U wilt lagere lasten voor de middenklasse en een kleinere overheid, en u beschermt eigenwoningbezit [232, 309]. De partij pleit voor een strenger asielstelsel om meer grip op migratie te krijgen en voor een sterke, innovatieve economie met radicale economische groei [310, 311].",
            "Volt": "U gelooft in een sterk en federaal Europa als antwoord op de grote uitdagingen van deze tijd [312]. U pleit voor een Europese krijgsmacht, een gezamenlijk en ambitieus klimaatbeleid en een humaan Europees asielbeleid [313-315]. U wilt investeren in een 'Silicon Europa' om technologisch onafhankelijk te zijn en bent voorstander van een basisinkomen [316, 317]."
        };

        let currentQuestionIndex = 0;
        const userAnswers = {};

        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        const questionCounterEl = document.getElementById('question-counter');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const nextBtn = document.getElementById('next-btn');
        const backBtn = document.getElementById('back-btn');
        const submitBtn = document.getElementById('submit-btn');
        const resetBtn = document.getElementById('reset-btn');
        const restartBtnResults = document.getElementById('restart-btn-results');

        function loadQuestion() {
            const questionData = quizData[currentQuestionIndex];
            
            questionCounterEl.textContent = `Vraag ${currentQuestionIndex + 1} van ${quizData.length}`;
            questionTextEl.textContent = questionData.question;
            optionsContainerEl.innerHTML = '';

            for (const key in questionData.options) {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';

                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'option';
                radio.value = key;
                radio.id = `option-${key}`;

                if (userAnswers[currentQuestionIndex] === key) {
                    radio.checked = true;
                    optionDiv.classList.add('selected');
                }
                
                const label = document.createElement('label');
                label.htmlFor = `option-${key}`;
                label.textContent = questionData.options[key];

                optionDiv.appendChild(radio);
                optionDiv.appendChild(label);
                
                optionDiv.addEventListener('click', () => {
                    radio.checked = true;
                    saveAnswer();
                    document.querySelectorAll('.option').forEach(el => el.classList.remove('selected'));
                    optionDiv.classList.add('selected');
                });

                optionsContainerEl.appendChild(optionDiv);
            }
            updateButtonStates();
        }
        
        function saveAnswer() {
            const selectedOption = document.querySelector('input[name="option"]:checked');
            if (selectedOption) {
                userAnswers[currentQuestionIndex] = selectedOption.value;
            }
            updateButtonStates();
        }

        function updateButtonStates() {
            backBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = currentQuestionIndex === quizData.length - 1;
            
            const allAnswered = Object.keys(userAnswers).length === quizData.length;
            submitBtn.disabled = !allAnswered;
        }

        function showResults() {
            const scores = {};
            parties.forEach(party => scores[party] = 0);

            for (const qIndex in userAnswers) {
                const answer = userAnswers[qIndex];
                const scoringParties = quizData[qIndex].scores[answer];
                if (scoringParties) {
                    scoringParties.forEach(party => {
                        scores[party]++;
                    });
                }
            }

            const sortedScores = Object.entries(scores).sort(([, a], [, b]) => b - a);

            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'block';

            const scoreListEl = document.getElementById('score-list');
            scoreListEl.innerHTML = '';
            sortedScores.forEach(([party, score]) => {
                const li = document.createElement('li');
                li.textContent = `${party}: ${score}`;
                scoreListEl.appendChild(li);
            });

            if (sortedScores.length > 0) {
                const bestMatchPartyName = sortedScores;
                document.getElementById('best-match-party').textContent = `Uw beste match: ${bestMatchPartyName}`;
                document.getElementById('best-match-description').textContent = partyDescriptions[bestMatchPartyName] || "Geen beschrijving beschikbaar.";
            }
        }

        nextBtn.addEventListener('click', () => {
            const selectedOption = document.querySelector('input[name="option"]:checked');
            if (!selectedOption && userAnswers[currentQuestionIndex] === undefined) {
                alert('Kies alstublieft een antwoord.');
                return;
            }
            saveAnswer(); 
            
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        });

        backBtn.addEventListener('click', () => {
            saveAnswer(); 
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });
        
        submitBtn.addEventListener('click', () => {
            saveAnswer(); 
            if (Object.keys(userAnswers).length === quizData.length) {
                showResults();
            } else {
                alert('Beantwoord alstublieft alle vragen voordat u de resultaten bekijkt.');
            }
        });

        resetBtn.addEventListener('click', () => {
            if (confirm('Weet u zeker dat u de quiz wilt resetten? Al uw antwoorden worden gewist.')) {
                location.reload();
            }
        });
        
        restartBtnResults.addEventListener('click', () => {
            location.reload();
        });

        document.addEventListener('DOMContentLoaded', loadQuestion);
    </script>

</body>
</html>
